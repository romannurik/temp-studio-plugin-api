import{Fragment$1 as e,jsxNodeToNodes$1 as t}from"../include/jsx-runtime-DIbD3AnT.js";var n={};const r={Fragment:e,Label:e=>({type:`label`,...e}),Button:e=>({type:`button`,...e}),Icon:e=>({type:`icon`,...e}),CodeSnippet:e=>({type:`codeSnippet`,...e}),StepPlan:e=>({type:`stepPlan`,...e}),StepProgressLabel:e=>({type:`stepProgressLabel`,...e}),StatusIcon:e=>({type:`statusIcon`,...e}),TextField:e=>({type:`textField`,...e}),FileLabel:e=>({type:`fileLabel`,...e}),HStack:({children:e,...n})=>({type:`hStack`,...n,children:t(e)}),VStack:({children:e,...n})=>({type:`vStack`,...n,children:t(e)}),FileChanges:e=>({type:`fileChanges`,...e}),Markdown:e=>({type:`markdown`,...e}),Expandable:({children:e,...n})=>({type:`expandable`,...n,children:t(e)})},i=/(?:@[\w\-:]+|\/[\w\-:]+)/g;function a(e){e||=``,typeof e==`object`&&(e=o(e)),e=e.trim();let t={prompt:``,empty:!0},n=0;for(let r of e.matchAll(i)){let i=r[0],a=e.substring(n,r.index).trim(),o=t.prompt;if(a&&(t.prompt+=a),i.startsWith(`@`)&&!t.agentHandle&&!t.prompt)t.agentHandle=i.substring(0);else if(i.startsWith(`/`)&&!t.slashCommand&&!t.prompt)t.slashCommand=i.substring(0);else if(a){t.prompt=o;continue}n=r.index+i.length}let r=e.substring(n).trim();return r&&(t.prompt+=r),t.empty=!t.agentHandle&&!t.prompt&&!t.slashCommand,t}function o(e){return e.body.map(e=>e.type===`markdown`?e.markdown:``).join(``)}function s(e){let t=[];for(let n of e.history)n.type===`message`?t.push(n):n.type===`subthread`&&t.push(...s(n));return t}function c(e){for(;e.parentThread;)e=e.parentThread;return e}export{r as UI,s as flattenThread,o as messageText,a as parseUserPrompt,c as rootThread,n as ui};