"use strict";var e={};const t=e=>({type:`label`,label:e});function n(e,t,...n){if(!e||typeof e!=`function`)throw Error(`Expected a JSX component but got: ${e}`);let r=e,a=i(r({...t,children:n}));return a.length>=1?{type:`fragment`,children:a}:a[0]}const r={Label:e=>({type:`label`,...e}),Button:e=>({type:`button`,...e}),CodeSnippet:e=>({type:`codeSnippet`,...e}),StepPlan:e=>({type:`stepPlan`,...e}),StepProgressLabel:e=>({type:`stepProgressLabel`,...e}),TextField:e=>({type:`textField`,...e}),FileLabel:e=>({type:`fileLabel`,...e}),HStack:({children:e,...t})=>({type:`hStack`,...t,children:i(e)}),VStack:({children:e,...t})=>({type:`vStack`,...t,children:i(e)}),Fragment:({children:e,...t})=>({type:`fragment`,...t,children:i(e)})};function i(e){return e===void 0?[]:typeof e==`string`?[t(e)]:Array.isArray(e)?e.flatMap(i):typeof e==`object`&&`type`in e?[e]:[]}n.Fragment=r.Fragment;const a=/(?:@[\w\-:]+|\/[\w\-:]+)/g;function o(e){e||=``,typeof e==`object`&&(e=s(e)),e=e.trim();let t={prompt:``,empty:!0},n=0;for(let r of e.matchAll(a)){let i=r[0],a=e.substring(n,r.index).trim(),o=t.prompt;if(a&&(t.prompt+=a),i.startsWith(`@`)&&!t.agentHandle&&!t.prompt)t.agentHandle=i.substring(0);else if(i.startsWith(`/`)&&!t.slashCommand&&!t.prompt)t.slashCommand=i.substring(0);else if(a){t.prompt=o;continue}n=r.index+i.length}let r=e.substring(n).trim();return r&&(t.prompt+=r),t.empty=!t.agentHandle&&!t.prompt&&!t.slashCommand,t}function s(e){return e.body.map(e=>e.type===`markdown`?e.markdown:``).join(``)}function c(e){let t=[];for(let n of e.history)n.type===`message`?t.push(n):n.type===`subthread`&&t.push(...c(n));return t}function l(e){for(;e.parentThread;)e=e.parentThread;return e}exports.UI=r,exports.flattenThread=c,exports.jsx=n,exports.messageText=s,exports.parseUserPrompt=o,exports.rootThread=l,Object.defineProperty(exports,`ui`,{enumerable:!0,get:function(){return e}});